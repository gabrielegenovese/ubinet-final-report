\usepackage{hyperxmp}
\usepackage{hyperref}
\usepackage{xspace}
\usepackage{todonotes}
%\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{subcaption}
\usetikzlibrary{automata,positioning,decorations.pathreplacing}
\usepackage{paralist}
\usepackage[normalem]{ulem} % [normalem] prevents the package from changing the default behavior of `\emph` to underline.
\usepackage{url}
\usepackage{graphicx}

% \ifcomments
% \newcommand{\etienne}[1]{\todo[inline,backgroundcolor=blue!25]{E: #1}}
% \newcommand{\pascal}[1]{\todo[inline,backgroundcolor=green!40]{P: #1}}
% \newcommand{\cinzia}[1]{\todo[inline,backgroundcolor=purple!30]{C: #1}}
% \else
% \newcommand{\etienne}[1]{}
% \newcommand{\pascal}[1]{}
% \newcommand{\cinzia}[1]{}
% \fi
%	robust
\newcommand{\nameclass}{robust}
%	robust

\newcommand{\confequiv}[1]{\mathrel{\sim_{#1}^{\mathsf{conf}}}}

\newcommand{\debugmode}[1]{\textcolor{blue!60!black}{#1}}
\newcommand{\send}[3]{!#3^{#1\to #2}}
\newcommand{\recv}[3]{?#3^{#1\to #2}}

\newcommand{\marrow}[3]{#1\xrightarrow{#3}#2}
% \newcommand{\xdashhrightarrow}[1]{
% 	\tikz[baseline=-0.5ex]\draw[->,dashed](0,0)-- node[above]{\ensuremath{#1}} (0.5,0);
% }
\newcommand{\umarrow}[3]{\debugmode{#1\xdashrightarrow{#3}\!\!#2}}
\newcommand{\executionsofcfsms}[2]{\executionsof{#1}{#2}}
\newcommand{\verticalorder}[2]{#1 \porderof{\mathsf{proc}} #2}
\newcommand{\verticalorderstrict}[2]{#1 \porderstrictof{\mathsf{proc}} #2}

\newcommand{\prefixorder}{\torderof{\mathsf{pref}}}
\newcommand{\prefixorderstrict}{\torderstrictof{\mathsf{pref}}}
\newcommand{\prefixordermsc}{\porderoff{\mathsf{pref}}{\mathsf{msc}}}
\newcommand{\prefixorderstrictmsc}{\porderstrictoff{\mathsf{pref}}{\mathsf{msc}}}

\newcommand{\detof}[1]{\mathsf{det}(#1)}

\newcommand{\Pomsets}{\mathcal{P}}
\newcommand{\apomset}{P}
\newcommand{\porderstrictoff}[2]{\mathrel{\prec_{#1}^{#2}}}
\newcommand{\porderstrictof}[1]{\porderstrictoff{#1}{}}
\newcommand{\porderoff}[2]{\mathrel{\preceq_{#1}^{#2}}}
\newcommand{\porderof}[1]{\porderoff{#1}{}}

\newcommand{\torderstrictof}[1]{\mathrel{<_{#1}}}
\newcommand{\torderof}[1]{\mathrel{\leq_{#1}}}


\newcommand{\executionsofmodel}[1]{\mathcal{E}_{#1}}
\newcommand{\configurationof}[2]{\mathsf{conf}_{#2}(#1)}
\newcommand{\event}{\eta}
\newcommand{\anevent}{\event}
\newcommand{\execution}{e}
\newcommand{\mscof}[1]{\mathsf{msc}(#1)}
\newcommand{\linearizationsof}[2]{\mathsf{lin}_{#2}(#1)}
\newcommand{\linearisationsof}[2]{\mathsf{lin}_{#2}(#1)}
\newcommand{\projectionof}[1]{\mathsf{proj}(#1)}
\newcommand{\preproductof}[1]{\mathsf{preprod}(#1)}
\newcommand{\productof}[1]{\mathsf{prod}(#1)}
\newcommand{\dualof}[1]{\overline{#1}}
\newcommand{\eqdef}{\stackrel{\mathsf{def}}{=}}
\newcommand{\messageof}[1]{\mathsf{msg}(#1)}
\newcommand{\abinrel}{\mathrel{R}}
\newcommand{\cardinalof}[1]{\left|#1\right|}
\newcommand{\sizeof}[1]{\left|#1\right|}
\newcommand{\hbof}[2]{\mathrel{\preceq_{#1}^{#2}}}
\newcommand{\hbstrictof}[2]{\mathrel{\prec_{#1}^{#2}}}
\newcommand{\happensbeforestrictof}[1]{\hbstrictof{#1}{}}
\newcommand{\happensbefore}{\hbof{\msc}{}}
\newcommand{\happensbeforestrict}{\hbstrictof{\msc}{}}
\newcommand{\processof}[1]{\mathsf{proc}(#1)}
\newcommand{\alinearization}{\mathrel{\ll}}
\newcommand{\alinearisation}{\alinearization}
\newcommand{\pplin}{\rightsquigarrow}
\newcommand{\mblin}{\rightsquigarrow}
\newcommand{\lin}{\rightsquigarrow}
\newcommand{\linrel}{\rightsquigarrow}
\newcommand{\rel}{R}
\newcommand{\Act}{\mathsf{Act}}
\newcommand{\SAct}{\mathsf{Act}_S}
\newcommand{\RAct}{\mathsf{Act}_R}
\newcommand{\UAct}{\underline{\Act}}
%\newcommand{\CAct}{\circled{\mathsf{Act}}}
\newcommand{\ExtAct}{\dashuline{\Act}} 
%\newcommand{\circled}[1]{\mathring{#1}}
\newcommand{\Actofproc}[1]{\Act_{#1}}
\newcommand{\Actp}{\Actofproc{p}}
\newcommand{\Actsynch}{\mathsf{Act}_{\matsf{synch}}}
\newcommand{\Arrows}{\mathsf{Arr}}
\newcommand{\MArrows}{\mathsf{MArr}}
\newcommand{\ASynchAct}{\mathsf{ASynchAct}}
\newcommand{\Acts}{\mathsf{Act}^*}
\newcommand{\Actsp}{\mathsf{Act}_{p}^*}
\newcommand{\length}[1]{\mathsf{length}(#1)}
\newcommand{\source}{\mathsf{src}}
\newcommand{\mbformula}{\varphi_{\mathsf{mb}}}
\newcommand{\mbFormula}{\Phi_{\mathsf{mb}}}
%\newcommand{\events}[1]{\mathsf{events}(#1)}
\newcommand{\eventsof}[1]{\mathsf{events}(#1)}
\newcommand{\eventsatof}[2]{\mathsf{events}_{@#1}(#2)}
\newcommand{\sendeventsof}[1]{\mathsf{events}_S(#1)}
\newcommand{\receiveeventsof}[1]{\mathsf{events}_R(#1)}
%\newcommand{\unmatchedsends}[1]{\mathsf{US}\text{-}\mathsf{ev}(#1)}
\newcommand{\prefixclosureof}[1]{\mathsf{Prefixes}(#1)}
\newcommand{\acommunicationmodel}{\mathsf{com}}
\newcommand{\synchmodel}{\mathsf{synch}}
\newcommand{\rscmodel}{\mathsf{rsc}}
\newcommand{\causalmodel}{\mathsf{causal}}
\newcommand{\ppmodel}{\mathsf{p2p}}
\newcommand{\mbmodel}{\mathsf{mb}}
\newcommand{\busmodel}{\mathsf{bus}}
\newcommand{\bagmodel}{\mathsf{bag}}
\newcommand{\erlangmodel}{\mathsf{erl}}
%\newcommand{\rawmodel}{\mathsf{raw}}
\newcommand{\acommunicationmodelmscset}{\mathcal{M}_{\mathsf{com}}}
\newcommand{\mscsetofmodel}[1]{\mathcal{M}_{#1}}
\newcommand{\allmscs}{\mscsetofmodel{\rawmodel}}
\newcommand{\alanguage}{L}
\newcommand{\languageof}[3]{\ensuremath{\mathcal{L}_{#2}^{#3}(#1)}}
\newcommand{\languageofnfa}[1]{\languageof{#1}{\mathsf{words}}{}}
\newcommand{\labelalphabet}{\Arrows}
%\newcommand{\labellanguageof}[1]{\languageof{#1}{\labelalphabet}{}}
\newcommand{\labellanguageof}[1]{\languageofnfa{#1}}
\newcommand{\msclanguageof}[2]{\languageof{#1}{\ensuremath{\mathsf{msc}}}{#2}}
\newcommand{\msclanguageofcc}[1]{\msclanguageof{#1}{\ensuremath{\exists/\forall}}}
\newcommand{\existentialmsclanguageof}[1]{\msclanguageof{#1}{\ensuremath{\exists}}}
\newcommand{\universalmsclanguageof}[1]{\msclanguageof{#1}{\ensuremath{\forall}}}
\newcommand{\msclanguageofsystem}[2]{\languageof{#1}{\ensuremath{\mathsf{msc}}}{#2}}
\newcommand{\executionsof}[2]{\languageof{#1}{\mathsf{exec}}{#2}}
\newcommand{\partialexecutionsof}[2]{\executionsof{\acceptcompletion{#1}}{#2}}
%\newcommand{\gtlabel}[3]{#1\to #2 : #3}
\newcommand{\gtlabel}[3]{\marrow{#1}{#2}{#3}}
\newcommand{\gt}{\mathsf{G}}
\newcommand{\labeltomsc}[1]{\mathsf{msc}(#1)}
\newcommand{\labeltoexec}[1]{\mathsf{exec}(#1)}
\newcommand{\resid}[2]{\mathsf{resid}_{#1}(#2)}
\newcommand{\residat}[3]{\mathsf{resid}^{#1}_{#2}(#3)}
\newcommand{\stateof}[2]{\ensuremath{\mathsf{state}_{#1}(#2)}}
\newcommand{\senderof}[2]{\mathsf{sender}_{#1}(#2)}
\newcommand{\comp}[1]{#1'}

\newcommand{\hbcom}[2]{\prec_{#1}^{#2}}

\newcommand{\acfsm}{\mathcal{A}}
\newcommand{\cfsms}{\mathcal{S}}
\newcommand{\XYformula}[1]{\mathsf{#1}}

\newcommand{\pdlFormula}[1]{\Phi_{\mathsf{#1}}}

\newcommand{\add}[2]{\mathop{\textsf{Add}_{#1}^{#2}}}
\newcommand{\forget}[1]{\mathop{\textsf{Forget}_#1}}
\newcommand{\phiksttvalid}{\ensuremath{\Phi_\mathsf{valid}^{k\text{-}\mathsf{stt}}}\xspace}
\newcommand{\rename}[2]{\mathop{\textsf{Rename}_{#1,#2}}}
\newcommand{\sttunion}{\oplus}

\newcommand{\sem}[1]{\llbracket #1 \rrbracket}
\newcommand{\aMSCclass}{\mathcal{C}}
\newcommand{\Class}{\aMSCclass}
\newcommand{\Violation}{\mathcal{D}}
\newcommand{\Sys}{\mathcal{S}}
\newcommand{\System}{\mathcal{S}}
\newcommand{\A}{\mathcal{A}}
\newcommand{\Aut}{\mathcal{A}}
\newcommand{\Loc}{\mathit{Loc}}
\newcommand{\cbm}{M}
\newcommand{\Sync}{\mathcal{C}}
\newcommand{\N}{\mathbb{N}}
%\newcommand{\MSCs}{\mathsf{MSC}_{\mathsf{p2p}}}
\newcommand{\MSCs}{\mathsf{MSC}}
%\newcommand{\ppMSCs}{\mathsf{MSC}}
\newcommand{\comsymb}{\textup{com}}
\newcommand{\ppsymb}{\mathsf{p2p}}

\newcommand{\asyL}[1]{L_{\asy}(#1)}

\newcommand{\pp}{\ensuremath{\mathtt{p2p}}\xspace}
\newcommand{\co}{\ensuremath{\mathtt{co}}\xspace}


\newcommand{\mscsofcfsms}[2]{\msclanguageof{#1}{#2}}
\newcommand{\mb}{\ensuremath{\mathtt{mb}}\xspace}
\newcommand{\mbsymb}{\mb}

\newcommand{\cL}[1]{L_{\comsymb}(#1)}
\newcommand{\ppL}[1]{L_{\pp}(#1)}
\newcommand{\mbL}[1]{L_{\mb}(#1)}
\newcommand{\MSCclassofcom}[1]{\mathsf{MSC}_{#1}}
\newcommand{\mbMSCs}{\MSCclassofcom{\mb}}
\newcommand{\cdMSCs}{\MSCclassofcom{\mb}}
\newcommand{\stwMSCs}[1]{\mathsf{MSC}^{#1\textup{-}\mathsf{stw}}}
\newcommand{\bTrees}[1]{\mathsf{Trees}_{#1}}
\newcommand{\Lang}{L}
\newcommand{\Ch}{\mathbb{C}}
\newcommand{\Procs}{\procSet}
\newcommand{\Msg}{\mathbb{M}}
\newcommand{\acceptcompletion}[1]{\widehat{#1}}

\newcommand{\msg}{m}
\newcommand{\msga}{m}
\newcommand{\msgb}{m'}
%\newcommand{\sact}[3]{#1!_{#3}#2}
%\newcommand{\ract}[3]{#1?_{#3}#2}
\newcommand{\sact}[3]{\send{#1}{#2}{#3}}
\newcommand{\ract}[3]{\rec{#1}{#2}{#3}}
\newcommand{\Pref}[1]{\mathit{Pref}(#1)}
\newcommand{\Prefonen}[1]{\mathit{Pref}_{\onensymb}(#1)}
\newcommand{\Prefnn}[1]{\mathit{Pref}_{\nnsymb}(#1)}
\newcommand{\ppLin}[1]{\mathit{Lin}_{\mathsf{p2p}}(#1)}
\newcommand{\mbLin}[1]{\mathit{Lin}_{\mathsf{mb}}(#1)}
\renewcommand{\phi}{\varphi}
% \newcommand{\msc}{M}
\newcommand{\procrel}{\to}

\newcommand{\Events}{\mathcal{E}}

\newcommand{\tlabel}{\mathsf{action}}
\newcommand{\actionof}[1]{\tlabel(#1)}
\newcommand{\tmessage}{\mathit{msg}}
\newcommand{\tsource}{\mathit{source}}
\newcommand{\ttarget}{\mathit{target}}

%\newcommand{\Act}{\Sigma}
\newcommand{\pAct}[1]{\Sigma_{#1}}
\newcommand{\Matched}[1]{\mathit{Matched}(#1)}
\newcommand{\Unm}[1]{\mathit{Unm}(#1)}
\newcommand{\sametype}[3]{\#_{#2}(#3,#1)}
%\newcommand{\pqsAct}[2]{\Sigma_{#1!#2}}
%\newcommand{\pqrAct}[2]{\Sigma_{#1?#2}}
\newcommand{\plh}{\hspace{0.1em}\underline{\hspace{0.5em}}\hspace{0.1em}}
%\newcommand{\pqsAct}[2]{\Sigma_{\mathit{send}(#1,#2,\plh)}}
%\newcommand{\pqrAct}[2]{\Sigma_{\mathit{rec}(#1,#2,\plh)}}
%\newcommand{\psAct}[1]{\Sigma_{\mathit{send}(#1,\plh,\plh)}}
%\newcommand{\prAct}[1]{\Sigma_{\mathit{rec}(#1,\plh,\plh)}}
%\newcommand{\qsAct}[1]{\Sigma_{\mathit{send}(\plh,#1,\plh)}}
%\newcommand{\qrAct}[1]{\Sigma_{\mathit{rec}(\plh,#1,\plh)}}
%\newcommand{\msAct}[1]{\Sigma_{\mathit{send}(\plh,\plh,#1)}}
%\newcommand{\mrAct}[1]{\Sigma_{\mathit{rec}(\plh,\plh,#1)}}
\newcommand{\pqsAct}[2]{{\mathit{Send}(#1,#2,\plh)}}
\newcommand{\pqrAct}[2]{{\mathit{Rec}(#1,#2,\plh)}}
\newcommand{\psAct}[1]{{\mathit{Send}(#1,\plh,\plh)}}
\newcommand{\prAct}[1]{{\mathit{Rec}(#1,\plh,\plh)}}
\newcommand{\qsAct}[1]{{\mathit{Send}(\plh,#1,\plh)}}
\newcommand{\qrAct}[1]{{\mathit{Rec}(\plh,#1,\plh)}}
\newcommand{\msAct}[1]{{\mathit{Send}(\plh,\plh,#1)}}
\newcommand{\mrAct}[1]{{\mathit{Rec}(\plh,\plh,#1)}}
\newcommand{\sAct}{{\mathit{Send}(\plh,\plh,\plh)}}
\newcommand{\rAct}{{\mathit{Rec}(\plh,\plh,\plh)}}


\newcommand{\SendEv}[1]{\mathit{SendEv}(#1)}
\newcommand{\RecEv}[1]{\mathit{RecEv}(#1)}


\newcommand{\act}{\sigma}

\newcommand{\STT}{\textsf{STT}\xspace}

\newcommand{\Avalid}[1]{\A_\mathsf{valid}^{#1\text{-}\mathsf{stt}}}
\newcommand{\Amsc}[1]{\A_\mathsf{msc}^{#1\text{-}\mathsf{stw}}}
\newcommand{\Asystem}[2]{\A_{#2}^{#1\text{-}\mathsf{stw}}}
\newcommand{\Aformula}[2]{\A_{#2}^{#1\text{-}\mathsf{stw}}}



\newcommand{\com}[2]{{\color{red}#1 : #2}}
\newcommand{\comL}[1]{{\color{purple}Laetitia : #1}}
\newcommand{\comAmrita}[1]{{\color{blue}Amrita : #1}}
\newcommand{\comEtienne}[1]{{\color{brown}Etienne : #1}}
\newcommand{\alain}[1]{{\color{red} Alain : #1}}
\newcommand{\benedikt}[1]{{\textcolor{blue}{Benedikt: #1}}}
%
% \newtheorem{definition}{Definition}
% \newtheorem{theorem}{Theorem}
% \newtheorem{lemma}{Lemma}
% \newtheorem{example}{Example}
%\newtheorem{proposition}{Proposition}

\newcommand{\kSous}[1]{$#1$-synchronous}
\newcommand{\kSable}[1]{$#1$-synchronizable}
\newcommand{\kSity}[1]{$#1$-synchro\-nizability}
\newcommand{\kE}[1]{$#1$-exchange}

\newcommand{\skSous}[1]{strongly $#1$-synchronous}
\newcommand{\skSable}[1]{strongly $#1$-synchronizable}
\newcommand{\skSity}[1]{strong $#1$-synchro\-nizability}
\newcommand{\skE}[1]{strong $#1$-exchange}

\newcommand{\sendSet}{S}
\newcommand{\receiveSet}{R}
%\newcommand{\paylodSet}{\mathbb{V}}
\newcommand{\procSet}{\mathbb{P}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\commu}{\mathrm{com}}
\newcommand{\mailbox}{\mathrm{mbox}}
\newcommand{\ptop}{\mathrm{p2p}}

%\newcommand{\procofaction}[2]{\mathsf{proc}_{#1}(#2)}
\newcommand{\procofaction}[2]{proc_{#1}(#2)}
%\newcommand{\rec}[3]{\mathit{rec}(#1, #2, #3)}
%\newcommand{\send}[3]{\mathit{send}(#1, #2, #3)}
\newcommand{\ssymb}{\mathsf{s}}
\newcommand{\rsymb}{\mathsf{r}}

%\newcommand{\amessage}{\mathbf{v}}
\newcommand{\amessage}{m}

\newcommand{\Messages}{\Msg}

\newcommand{\matches}{\mathrel{\vdash\!\!\dashv}}
\newcommand{\system}{\mathfrak S}

\newcommand{\globalstate}[1]{\vec{#1}}
%\newcommand{\B}{\ensuremath{\mathtt{Ch}}}

\newcommand{\transitionKE}[2]{\xrightarrow{#1}_{#2}}
\newcommand{\transitionKEm}[2]{\xRightarrow[\hspace*{0.1cm}{\scriptstyle \mathsf{cd}}^{\mailbox}\hspace*{0.1cm}]{#1,#2}}
\newcommand{\transitionKEp}[2]{\xRightarrow[\hspace*{0.1cm}{\scriptstyle \mathsf{cd}}^{\ptop}\hspace*{0.1cm}]{#1,#2}}

\newcommand{\runnable}[2]{\xRightarrow[\hspace*{0.1cm}{\scriptstyle #1}\hspace*{0.1cm}]{#2}}

\newcommand{\existb}[1]{$\exists~#1$-bounded}

\newcommand{\triple}{(\globalstateli,\globalstatelj,\globalstatelf) }
\newcommand{\globalstateli}{\boldsymbol{in}}
\newcommand{\globalstatelj}{\boldsymbol{mid}}
\newcommand{\globalstatelf}{\boldsymbol{fin}}
\newcommand{\AutS}{\mathtt{Send}(\globalstateli,\globalstatelj)}
\newcommand{\AutR}{\mathtt{Rec}(\globalstatelj,\globalstatelf)}
\newcommand{\AutSR}{\mathtt{SR}(\globalstateli, \globalstatelj, \globalstatelf)}
\newcommand{\condemned}{\mathtt{cdm}}
\newcommand{\LAutSR}{\mathcal{L}(\AutSR)}
\newcommand{\LAutS}{\mathcal{L}(\AutS)}
\newcommand{\LAutR}{\mathcal{L}(\AutR)}
\newcommand{\decomp}{D(\globalstateli, \globalstatelj, \globalstatelf)}
\newcommand{\decompr}{D_{\mathcal{R}}(\globalstateli, \globalstatelj, \globalstatelf)}
\newcommand{\projofon}[2]{\mathsf{proj}_{#2}(#1)}
\newcommand{\encode}[1]{\llbracket #1 \rrbracket }
\newcommand{\scgraph}[1]{\mathsf{CG^{\circledast}}(#1)}
%\newcommand{\ecgraph}[1]{\mathsf{ECG^{\circledast}}(#1)}
\newcommand{\cgraph}[1]{\mathsf{CG}(#1)}
\newcommand{\ecgraph}[1]{\mathsf{ECG}(#1)}
\newcommand{\gcgraph}[1]{\mathsf{GCG}(#1)}

% \newcommand{\state}{\mathsf{ar}}
\newcommand{\gstate}{\pmb{\mathsf{ar}}}
\newcommand{\B}{\mathbf{c}}
\newcommand{\paylodSet}{\mathbb{M}}
%\newcommand{\actionSet}{A}
\newcommand{\unmatched}{\mathbf{u}}
\newcommand{\boolunmatched}{\mathbf{b}}
\newcommand{\maxunmatched}{\mathbf{um}}
\newcommand{\Langg}[1]{\mathcal{L}(#1)}
\newcommand{\reachablestate}{S_\mathcal{R}}

\newcommand{\deviate}[1]{\mathsf{deviate}(#1)}
\newcommand{\stateSet}{\mathcal{S}}

\newcommand{\AP}{\textsf{AP}}
\newcommand{\Exists}{\textsf{E}}
% \newcommand{\Loop}[1]{\textsf{Loop}\langle #1 \rangle}
\newcommand{\test}[1]{\textsf{test}(#1)}
\newcommand{\inv}[1]{#1^{-1}}
\newcommand{\jump}{\textsf{jump}}

\mathchardef\mhyphen="2D
\newcommand{\senddeviate}[1]{\mathsf{send\mhyphen deviate}(#1)}

%\makeatarrow
\newcommand*{\da@rightarrow}{\mathchar"0\hexnumber@\symAMSa 4B }
\newcommand*{\da@leftarrow}{\mathchar"0\hexnumber@\symAMSa 4C }
\newcommand*{\xdashrightarrow}[2][]{%
	\mathrel{%
		\mathpalette{\da@xarrow{#1}{#2}{}\da@rightarrow{\,}{}}{}%
	}%
}
\newcommand{\xdashleftarrow}[2][]{%
	\mathrel{%
		\mathpalette{\da@xarrow{#1}{#2}\da@leftarrow{}{}{\,}}{}%
	}%
}
\newcommand*{\da@xarrow}[7]{%
	% #1: below
	% #2: above
	% #3: arrow left
	% #4: arrow right
	% #5: space left
	% #6: space right
	% #7: math style
	\sbox0{$\ifx#7\scriptstyle\scriptscriptstyle\else\scriptstyle\fi#5#1#6\m@th$}%
	\sbox2{$\ifx#7\scriptstyle\scriptscriptstyle\else\scriptstyle\fi#5#2#6\m@th$}%
	\sbox4{$#7\dabar@\m@th$}%
	\dimen@=\wd0 %
	\ifdim\wd2 >\dimen@
	\dimen@=\wd2 %
	\fi
	\count@=2 %
	\def\da@bars{\dabar@\dabar@}%
	\@whiledim\count@\wd4<\dimen@\do{%
		\advance\count@\@ne
		\expandafter\def\expandafter\da@bars\expandafter{%
			\da@bars
			\dabar@
		}%
	}%
	\mathrel{#3}%
	\mathrel{%
		\mathop{\da@bars}\limits
		\ifx\\#1\\%
		\else
		_{\copy0}%
		\fi
		\ifx\\#2\\%
		\else
		^{\copy2}%
		\fi
	}%
	\mathrel{#4}%
}
\makeatother

\newcommand{\revb}{\xrightarrow{\text{rev}}_k}


\newcommand{\wS}{weakly synchro\-nizable}
\newcommand{\sS}{strongly synchro\-nizable}


\newcommand{\wks}[1]{weakly $#1$-synchro\-nizable}
\newcommand{\sks}[1]{strongly $#1$-synchro\-nizable}
\newcommand{\uwkS}[1]{\wks{#1}}
\newcommand{\uskS}[1]{\sks{#1}}

\newcommand{\ekb}[1]{existentially $#1$-bounded}
\newcommand{\ukb}[1]{universally $#1$-bounded}
\newcommand{\eb}{existentially bounded}
\newcommand{\ub}{universally bounded}

\newcommand{\wSo}{weakly synchro\-nous}
\newcommand{\sSo}{strongly synchro\-nous}
\newcommand{\wkSo}[1]{weakly $#1$-synchro\-nous}
\newcommand{\skSo}[1]{strongly $#1$-synchro\-nous}


\newcommand{\mscweakuniver}{\msc_{1}}
\newcommand{\systemweakuniver}{\System_{1}}
\newcommand{\mscW}{\msc_{1}}
\newcommand{\systemW}{\System_{2}}
\newcommand{\mscweakSexist}{\msc_{2}}
\newcommand{\systemweakSexist}{\System_{3}}
\newcommand{\mscstrongexist}{\msc_{4}}
\newcommand{\systemstrongexist}{\System_{4}}
\newcommand{\mscexist}{\msc_{3}}
\newcommand{\systemexist}{\System_{5}}
\newcommand{\mscWSexist}{\msc_{6}}
\newcommand{\systemWSexist}{\System_{6}}
\newcommand{\mscWS}{\msc_{7}}
\newcommand{\systemWS}{\System_{7}}
\newcommand{\mscuniver}{\msc_{8}}
\newcommand{\systemuniver}{\System_{8}}
\newcommand{\mscweak}{\msc_{9}}
\newcommand{\systemweak}{\System_{9}}
\newcommand{\mscWexist}{\msc_{10}}
\newcommand{\systemWexist}{\System_{10}}
\newcommand{\mscweakexist}{\msc_{11}}
\newcommand{\systemweakexist}{\System_{11}}
\newcommand{\mscstronguniver}{\msc_{12}}
\newcommand{\systemstronguniver}{\System_{12}}
\newcommand{\mscweakS}{\msc_{13}}
\newcommand{\systemweakS}{\System_{13}}

% my stuff
\newcommand{\mblinrel}{\overset{\none}{\rightsquigarrow}}
\newcommand{\onenlinrel}{\overset{\text{1-n}}{\rightsquigarrow}}

\newcommand{\asMSCs}{\mathsf{MSC}_{\asy}}
\newcommand{\ppMSCs}{\mathsf{MSC}_{\pp}}
\newcommand{\onenMSCs}{\mathsf{MSC}_{\onensymb}}
\newcommand{\nnMSCs}{\mathsf{MSC}_{\nnsymb}}
\newcommand{\rscMSCs}{\mathsf{MSC}_{\rsc}}
\newcommand{\asformula}{\varphi_{\mathsf{asy}}}
\newcommand{\ppformula}{\varphi_{\mathsf{p2p}}}
\newcommand{\cosymb}{\mathsf{co}}
\newcommand{\onensymb}{\ensuremath{\mathtt{onen}}\xspace}
\newcommand{\nnsymb}{\ensuremath{\mathtt{nn}}\xspace}
\newcommand{\coMSCs}{\mathsf{MSC}_{\co}}
\newcommand{\coformula}{\varphi_{\mathsf{co}}}
\newcommand{\onenformula}{\varphi_{\onensymb}}
\newcommand{\nnformula}{\varphi_{\nnsymb}}
\newcommand{\rscformula}{\varphi_{\rsc}}
\newcommand{\coL}[1]{L_{\mathsf{co}}(#1)}
\newcommand{\onenL}[1]{L_{\onensymb}(#1)}
\newcommand{\nnL}[1]{L_{\nnsymb}(#1)}
\newcommand{\asEk}{\MSCs_{\exists k\text{-}b}}
\newcommand{\ppEk}{\MSCs_{\pp\text{-}\exists k\text{-}\text{-}b}}
\newcommand{\coEk}{\MSCs_{\cosymb\text{-}\exists k\text{-}\text{-}b}}
\newcommand{\mbEk}{\MSCs_{\mbsymb\text{-}\exists k\text{-}\text{-}b}}
\newcommand{\asUk}{\MSCs_{\forall k\text{-}b}}
\newcommand{\ppUk}{\MSCs_{\pp\text{-}\forall k\text{-}\text{-}b}}
\newcommand{\coUk}{\MSCs_{\cosymb\text{-}\forall k\text{-}b}}
\newcommand{\mbUk}{\MSCs_{\mbsymb\text{-}\forall k\text{-}b}}
\newcommand{\relbAsy}{\hookrightarrow_{k}}
\newcommand{\relb}{\longmapsto_k}
\newcommand{\relbk}[1]{\longmapsto_{#1}}

\newcommand{\extraorderconstraintofcom}[1]{\sqsubset_{#1}}
\newcommand{\notextraorderconstraintofcom}[1]{{\not\sqsubset}_{#1}}
\newcommand{\partialorderofcom}[1]{\preceq_{#1}}
\newcommand{\notpartialorderofcom}[1]{{\not\preceq}_{#1}}
\newcommand{\partialorderstrictofcom}[1]{\prec_{#1}}
\newcommand{\notpartialorderstrictofcom}[1]{{\not\prec}_{#1}}

\newcommand{\mbrel}{\extraorderconstraintofcom{\ensuremath{\mathtt{mb}}}}
\newcommand{\mbpartial}{\partialorderofcom{\ensuremath{\mathtt{mb}}}}
\newcommand{\notmbpartial}{\notpartialorderofcom{\ensuremath{\mathtt{mb}}}}
\newcommand{\mbpartialstrict}{\partialorderstrictofcom{\ensuremath{\mathtt{mb}}}}
\newcommand{\notmbpartialstrict}{\notpartialorderstrictofcom{\ensuremath{\mathtt{mb}}}}

\newcommand{\onenrel}{\extraorderconstraintofcom{\ensuremath{\mathtt{1n}}}}
\newcommand{\onenpartial}{\partialorderofcom{\ensuremath{\mathtt{1n}}}}

%\newcommand{\nnrel}{\ltimes}
\newcommand{\nnrel}{\partialorderstrictofcom{\mathsf{1n/\mathsf{mb}}}}
\newcommand{\nnrelofmsc}[1]{\nnrel^{(#1)}}
\newcommand{\notnnrel}{\notpartialorderstrictofcom{\mathsf{1n/\mathsf{mb}}}}
\newcommand{\notnnrelofmsc}[1]{\notpartialorderstrictofcom{\mathsf{1n/\mathsf{mb}}}^{(#1)}}


\newcommand{\nnbowtie}{\extraorderconstraintofcom{\mathsf{nn}}}
\newcommand{\nnbowtieofmsc}[1]{\nnbowtie^{(#1)}}

\newcommand{\asUkformula}{\Phi_{\forall k\text{-}b}}
\newcommand{\ppUkformula}{\Phi_{\forall  k\text{-}\pp\text{-}b}}
\newcommand{\mbUkformula}{\Phi_{mb\text{-}\forall  k\text{-}b}}
\newcommand{\onenUkformula}{\Phi_{onen\text{-}\forall  k\text{-}b}}
\newcommand{\nnUkformula}{\Phi_{nn\text{-}\forall  k\text{-}b}}

\newcommand{\asy}{\ensuremath{\mathtt{asy}}\xspace}
\newcommand{\oneone}{\pp}

\newcommand{\none}{\mb}
\newcommand{\onen}{\ensuremath{\text{FIFO } \mathtt{1\mathsf{-}n}}\xspace}
\newcommand{\nn}{\ensuremath{\text{FIFO } \mathtt{n\mathsf{-}n}}\xspace}
\newcommand{\rsc}{\ensuremath{\mathtt{rsc}}\xspace}
\newcommand{\aoneone}{a1\mathsf{-}1}
\newcommand{\cooneone}{co1\mathsf{-}1}

\newcommand{\davide}[1]{\todo[inline,backgroundcolor=lime!50]{D: #1}}
\newcommand{\davidesmall}[1]{\todo[backgroundcolor=lime!50]{D: #1}}
\newcommand{\davidequestion}[1]{\todo[inline,backgroundcolor=red!50]{DQ: #1}}
\newcommand{\davidequestionsmall}[1]{\todo[backgroundcolor=red!50]{DQ: #1}}
\newcommand{\davideanswer}[1]{\todo[inline,backgroundcolor=green!50]{D: #1}}
\newcommand{\davideanswersmall}[1]{\todo[backgroundcolor=red!50]{D: #1}}



\newcommand{\cmark}{\ding{51}}%
\newcommand{\xmark}{\ding{55}}%


\newcommand{\erlangize}[1]{\mathsf{erl}(#1)}

\newcommand{\matchedof}[1]{\mathsf{matched}(#1)}
\newcommand{\unmatchedof}[1]{\mathsf{unmatched}(#1)}
\newcommand{\pomsetof}[1]{\mathsf{pomset}(#1)}

\newcommand{\anextletter}{\alpha}
\newcommand{\executionofencoding}[1]{\mathsf{exec}(#1)}
\newcommand{\mscofencoding}[1]{\mathsf{msc}(#1)}
\newcommand{\pomsetofencoding}[1]{\mathsf{pomset}(#1)}
\newcommand{\Encodings}{\mathsf{Encodings}}

\newcommand{\freevars}[1]{\mathsf{fv}(#1)}
%\newcommand{\canexeclanguageof}[1]{\languageof{#1}{\mathsf{can}}{}}
%\newcommand{\encodinglanguageof}[1]{\languageof{#1}{\mathsf{enc}}{}}
\newcommand{\msclanguageofmso}[1]{\languageof{#1}{\mathsf{msc}}{\mathsf{enc}}}
\newcommand{\pomsetlanguageofmso}[1]{\languageof{#1}{\mathsf{pom}}{\mathsf{enc}}}


%%% NEW GABRIELE GENOVESE'S MACROS

\newcommand{\arrmess}[3]{%
  $#1 \xleftrightarrow{#3} #2$
}

\newcommand{\syncmscmess}[3]{%
  \mess{#1}{#2}{#3}%
  \mess{}{#3}{#2}%
  \nextlevel
}

\newcommand{\asyncmscmess}[3]{%
  \mess{#1}{#2}{#3}%
  \nextlevel
}

\newcommand{\defsend}[3]{%
  #1\rhd #2 ! #3
}

\newcommand{\defrecv}[3]{%
  #1\lhd #2 ? #3
}

\newcommand{\Epsilon}[0]{%
  \mathcal{E}
}

\newcommand{\doublebrace}[1]{%
  \{\!\!\{#1\}\!\!\}
}

\newcommand{\mmsc}{M}

\newcommand{\setmsc}{\mathcal{M}}